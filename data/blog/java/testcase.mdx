---
title: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± ì˜ˆì‹œ
date: '2023-07-18'
tags: ['Java']
draft: false
summary: 'JUnitìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°'
---

## í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 
ê°œë°œí•œ ê¸°ëŠ¥ì„ ì‹¤í–‰í•´ì„œ í…ŒìŠ¤íŠ¸ í•  ë•Œ ìë°”ì˜ main ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì‹¤í–‰í•˜ê±°ë‚˜, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•œë‹¤. ì´ëŸ¬í•œ ë°©ë²•ì€ ì¤€ë¹„í•˜ê³  ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë¦¬ê³ , ë°˜ë³µ ì‹¤í–‰í•˜ê¸° ì–´ë µê³  ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ í•œë²ˆì— ì‹¤í–‰í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ìë°”ëŠ” **JUnit**ì´ë¼ëŠ” í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ì„œ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.


### 1. ë©¤ë²„ ê°ì²´ ìƒì„±í•˜ê¸°

```java
public class Member {
    private Long id;
    private String name;

    // getter, setter ì½”ë“œ ìƒëµ
}
```

---

### 2. ë©¤ë²„ ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°

```java
import hello.hellospring.domain.Member;
import java.util.List;
import java.util.Optional;

public interface MemberRepository {
    Member save(Member member);
    Optional<Member> findById(Long id);
    Optional<Member> findByName(String name);
    List<Member> findAll();
}
```

---

### 3. ë©¤ë²„ ë¦¬í¬ì§€í† ë¦¬ ë©”ëª¨ë¦¬ êµ¬í˜„ì²´ ìƒì„±í•˜ê¸°

```java
import hello.hellospring.domain.Member;
import java.util.*;

public class MemoryMemberRepository implements MemberRepository{
    /* ë™ì‹œì„± ë¬¸ì œê°€ ê³ ë ¤ë˜ì–´ ìˆì§€ ì•ŠìŒ, ì‹¤ë¬´ì—ì„œëŠ” ConcurrentHashMap, AtomicLong ì‚¬ìš© ê³ ë ¤ */
    private static Map<Long, Member> store = new HashMap<>();
    private static long sequence = 0L;

    @Override
    public Member save(Member member) {
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        return Optional.ofNullable(store.get(id));
    }

    @Override
    public Optional<Member> findByName(String name) {
        return store.values().stream()
                .filter(member -> member.getName().equals(name))
                .findAny();
    }

    @Override
    public List<Member> findAll() {
        return new ArrayList<>(store.values());
    }

    /* í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ëë‚  ë•Œë§ˆë‹¤ ì‹¤í–‰í•  ë©”ì†Œë“œ */
    public void clearStore() {
        store.clear();
    }
}
```

---

### 4. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±í•´ ë³´ê¸°
![image](https://github.com/subtitle1/subtitle1/assets/87356533/f633c512-ff16-466e-a689-151dfbf99b61)

í”„ë¡œì íŠ¸ ì†ŒìŠ¤ í´ë” í•˜ìœ„ì—ëŠ” main íŒ¨í‚¤ì§€ì™€ test íŒ¨í‚¤ì§€ê°€ ì¡´ì¬í•˜ëŠ”ë°, ë³´í†µ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ì‚¬ì§„ê³¼ ê°™ì´ Repository ë’¤ì— Testë¥¼ ë¶™ì´ëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤. ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```java {10-11} showLineNumbers
import hello.hellospring.domain.Member;
import org.junit.jupiter.api.Test;
import static org.assertj.core.api.Assertions.*;

class MemoryMemberRepositoryTest {

    MemoryMemberRepository repository = new MemoryMemberRepository();

    @AfterEach
    public void afterEach() {
        repository.clearStore();
    }

    @Test
    public void save() {
        Member member = new Member();
        member.setName("devtella");

        repository.save(member);

        Member result = repository.findById(member.getId()).get();
        assertThat(member).isEqualTo(result);
    }

    @Test
    public void findByName() {
        Member member1 = new Member();
        member1.setName("devtella1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("devtella2");
        repository.save(member2);

        Member result = repository.findByName("devtella1").get();

        assertThat(result).isEqualTo(member2);
    }

    @Test
    public void findAll() {
        Member member1 = new Member();
        member1.setName("devtella1");
        repository.save(member1);

        Member member2 = new Member();
        member2.setName("devtella2");
        repository.save(member2);

        List<Member> result = repository.findAll();

        assertThat(result.size()).isEqualTo(2);
    }
}
```

> ğŸ” **Assertions**
> 
> í…ŒìŠ¤íŠ¸ê°€ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ë¦¬í„´í•˜ëŠ”ì§€, ì—ëŸ¬ëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” jUnitì´ ì œê³µí•˜ëŠ” ì •ì  ê°ì²´ì´ë‹¤.

Assertionsì€ staticìœ¼ë¡œ importê°€ ê°€ëŠ¥í•´ì„œ **ë©”ì†Œë“œëª…(assertThat)ë§Œìœ¼ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥**í•˜ë‹¤. ì²«ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë˜ëŠ” ì¼€ì´ìŠ¤ì´ê³ , ë‘ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ì¼ë¶€ëŸ¬ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ì‘ì„±í–ˆë‹¤.

- ì˜¤ë¥˜ ë°œìƒ ì‹œ ì½˜ì†” 
![image](https://github.com/subtitle1/subtitle1/assets/87356533/d51d1e35-b321-4e7f-9358-70179624d198)

---

### @AfterEach
í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ëª…ì‹œëœ ë©”ì†Œë“œëŠ”Â **í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œ ì‹¤í–‰ í›„**ì— ë¬´ì¡°ê±´ ì‹¤í–‰ëœë‹¤. í…ŒìŠ¤íŠ¸ëŠ” ì„œë¡œ ì˜ì¡´ê´€ê³„ ì—†ì´, ìˆœì„œì— ìƒê´€ì—†ì´ ì„¤ê³„ê°€ ë˜ì–´ì•¼ í•œë‹¤. í•˜ë‚˜ì˜ í…ŒìŠ¤íŠ¸ê°€ ëë‚  ë•Œë§ˆë‹¤ ê³µìš© ë°ì´í„°ë¥¼ ì§€ì›Œì£¼ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ ë¬¸ì œì—†ì´ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì— ê·¸ëŸ° ê²½ìš°ì— ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤. 

---

í˜¼ìì„œ í•˜ëŠ” ê°œë°œì´ë¼ë©´ í…ŒìŠ¤íŠ¸ì½”ë“œì˜ ì˜ë¯¸ê°€ í¬ì§€ ì•Šì„ ìˆ˜ë„ ìˆì§€ë§Œ, ë§ì€ ì¸ì›ë¼ë¦¬ ê°œë°œ ì‹œì—ëŠ” ëª‡ ë§Œ ë¼ì¸, ëª‡ ì‹­ë§Œ ë¼ì¸ì´ ë„˜ì–´ê°€ëŠ” ê²½ìš°ë„ ìƒê¸´ë‹¤. ê·¸ë•Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ ì •ë§ ë§ì€ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìœ¼ë‹ˆ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ìŠµê´€í™”í•˜ë„ë¡ í•˜ì!
