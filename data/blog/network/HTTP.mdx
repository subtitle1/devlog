---
title: HTTP 통신과 역사
date: '2023-07-17'
tags: ['Network']
draft: false
summary: 'HyperText Transfer Protocol'
---

## HTTP 통신이란 👩🏻‍💻
HyperText Transfer Protocol의 준말로, 브라우저와 서버가 통신할 수 있도록 만들어주는 여러 프로토콜 가운데 한 종류로 웹 브라우저와 웹 서버 사이에서 데이터를 주고받는 데에 쓰이는 통신 프로토콜이다. 즉 **클라이언트와 서버 간의 메세지 교환 시 사용되는 규칙**이다.

지금은 대부분의 데이터를 HTTP 프로토콜에 담아서 전송한다. HTML, 텍스트 뿐 아니라 이미지, 음성, 영상, 파일 그리고 json, xml와 같은 API 등 거의 모든 형태의 데이터를 전송할 수 있다. 서버 간에 데이터를 주고 받을 때도 대부분 HTTP를 사용하고 있다.

## HTTP의 역사 📖
- HTTP/0.9: 1991년, GET 메소드만 지원, HTTP 헤더 x
- HTTP/1.0: 1996년, 메소드 및 헤더 추가
- **HTTP/1.1: 1997년, 현재 가장 많이 사용되는 프로토콜**
- HTTP/2: 2015년, 성능 개선
- HTTP/3: 진행 중인 버전, TCP 대신에 UDP 사용

![image](https://github.com/subtitle1/subtitle1/assets/87356533/bed539fa-0e73-4e47-ad61-4d9b9a5b08fd)

성능을 최적화 할 수 있도록 나온 것이 HTTP3으로, 사진과 같이 이미 http3를 많이 도입해 놓은 사이트도 많다. 

## HTTP의 특징 자세히 알아보기 🔍
HTTP의 특징은 크게 네 가지로 구분된다.

- 클라이언트 서버 구조
- 무상태 프로토콜(stateless), 비연결성
- HTTP 메세지
- 단순함, 확장 가능성

### 1. 클라이언트 서버 구조
![img](https://github.com/subtitle1/subtitle1/assets/87356533/33ffe896-79ff-49a8-94e6-72ae22074068)
Request / Response의 구조로 클라이언트는 서버에 요청을 하면 서버는 응답을 하는 구조라고 생각하면 된다. 클라이언트, 서버를 구분해 둘 때의 장점은 **양쪽이 독립적으로 서로 진화**할 수 있다는 것이다.

### 2. 무상태 프로토콜
![stateless](https://github.com/subtitle1/subtitle1/assets/87356533/9114623c-642a-4be9-94ed-87c63b7120be)
무상태 프로토콜은 서버가 클라이언트의 상태를 저장하거나 보존하지 않는다는 의미이다. 장점으로는 **서버의 확장성(스케일 아웃)이 높고**, 단점으로는 클라이언트가 항상 모든 데이터를 전송해야 한다는 것이다.

> **스케일 아웃이란?**
>
> 스케일 아웃은 **서버를 여러 대 추가**하여 시스템을 확장하는 것을 말한다. 서버가 여러 대로 나뉘기 때문에 각 서버에 걸리는 부하를 균등하게 해주는 것이다.

🤔 **stateful와 stateless의 차이**
- stateful
  - stateful은 서버가 `클라이언트의 이전 상태를 보존하는 것`이다. 중간에 서버가 바뀐다면 (극단적으로) 장애가 발생한다. 즉 같은 서버가 항상 유지되어야 하는 것이다.
  - 예시) 로그인이 필요없는 단순한 서비스 소개 화면

- stateless
  - 무상태 프로토콜은 요청할 때 `필요한 데이터를 다 담아서 전달`한다. 중간에 서버A에서 장애가 발생해도, 중계 서버가 서버B로 던져버린다.
  - 예시) 로그인 상태
    - 로그인한 상태를 서버에 유지
    - 일반적으로 브라우저 쿠키와 서버 세션 등을 사용해서 상태를 유지

stateless는 실무상 한계가 있을 수 있다. 모든 것을 무상태로 설계할 수 있는 경우도 있고, 없는 경우도 있기 때문에 상태 유지는 최소한의 경우에만 사용하는 것이 좋다.

### 3. 비연결성

클라이언트 A, B, C가 한 서버에 연결되어 있을 때 클라이언트가 따로 요청을 보내지 않더라도 서버는 계속 연결을 유지해야 하므로 서버의 자원이 계속 소모가 된다. 비연결성의 특징은 클라이언트가 어떤 요청을 하면 그 요청에 대한 응답을 하고 연결을 끊어버린다는 것이다. 서버는 연결을 유지하지 않고, `최소한의 자원만으로 서버를 유지`할 수 있다. 

`HTTP는 기본적으로 연결을 유지하지 않는 모델`로, 일반적으로 초 단위 이하의 빠른 속도로 응답을 제공한다. 예시로 한 시간 동안 수천명이 서비스를 사용한다고 해도 실제 서버에서 동시에 처리하는 요청은 수십 개 이하로 매우 적다. 즉, 비연결성은 서버 자원을 매우 효율적으로 사용할 수 있는 HTTP의 특징이다.

🫥 **비연결성의 한계와 극복**

❕매 요청마다 TCP/IP 연결을 새로 맺어야 한다는 것은 → 3 way handshake 시간이 추가가 된다는 것!

웹 브라우저로 사이트 요청 시 html 뿐 아니라 js, css, 추가 이미지 등 수많은 자원이 함께 다운로드가 된다. 계속 연결하고, 받고, 다시 연결을 끊는 비효율성을 줄이기 위해 지금은 HTTP 지속 연결(Persistent Connections)과 HTTP/2, HTTP/3의 최적화로 문제가 어느 정도 해결된 상태이다.

서버 개발 시에는 어떻게든 머리를 쥐어짜서 stateless한 방식으로 설계하기... 메모...... ✨